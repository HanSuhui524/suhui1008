'use strict';

const read=require('./read.js');
const path=require('path')
class Json extends Map{
    constructor(obj){
        if(!obj || obj === null) obj={}
        super([['type',typeof obj],['origin',obj]])
    }
    get type(){ return this.get('type') }
    get obj(){
        if(this.type === "object"){
            return this.get('origin')
        }
        return {};
    }
    get string(){return JSON.stringify(this.obj);}
}
const json = function(value){
    var o;
    if(typeof value === "string"){
        if(value.indexOf('.json')>0){
            o = read.path(value);
        }else{
            o = read.value(value);
        }
    }
    if(!o) o = read.value(value)
    return new Json(o);
}
json.read=function(path){return read.path(path);};
module .exports = json;